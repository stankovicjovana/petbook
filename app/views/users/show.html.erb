<p id="notice"><%= notice %></p>
<div class="user_profile">
	<h1>My Profile</h1>
	<p>
	  <strong>Name:</strong>
	  <%= @user.name %>
	</p>
	<div style="width:200px; height:auto">
		<%= image_tag(@user.profile_image, style:"width:100%") if @user.profile_image.attached? %>
	</div>

	<% unless @user.has_no_pets %>
		<div class="pets_list">
			<table>
			  <thead>
			    <tr>
			      <th>Name</th>
			      <th>Description</th>
			      <th>Type</th>
			      <th>Breed</th>
			      <th colspan="3"></th>
			    </tr>
			  </thead>

			  <tbody>
			    <% @pets.each do |pet| %>
			      <tr>
			        <td><%= pet.name %></td>
			        <td><%= pet.description %></td>
			        <td><%= pet.animal_type %></td>
			        <td><%= pet.breed %></td>
			        <td><%= link_to 'Show', pet %></td>

			        <% if pet.owned_by(@current_user) %>
				        <td><%= link_to 'Edit', edit_pet_path(pet) %></td>
				        <td><%= link_to 'Delete', pet, method: :delete, data: { confirm: 'Are you sure?' } %></td>
			        <% end %>
			      </tr>
			    <% end %>
			  </tbody>
			</table>
		</div>
	<% end %>

	<% if @user.is_current_user(session[:user_id]) %>
		<p>
		  <strong>Email:</strong>
		  <%= @user.email %>
		</p>
		<%= link_to 'Add pet', new_pet_path %>
		<%= link_to 'Edit', edit_user_path(@user) %> |
		<%= link_to 'Delete profile', @user, method: :delete, data: { confirm: 'Are you sure?' } %> |
	<% end %>
	<%= link_to 'Back', users_path %>

	<%= link_to	'Add new post', new_post_path %>
	<% if @user.posts %>
		<% @user.posts.each do |post| %>
			<p> Post </p>
			<%= post.user.name %>
			<%= post.body %>
			<div style="width:200px; height:auto">
				<%= image_tag(post.users_photo, style:"width:100%") if post.users_photo.attached? %>
			</div>
			<%= link_to	'Edit post', edit_post_path(post) %> |
			<%= link_to 'Delete post', post, method: :delete %>
		<% end %>
	<% end %>
</div>


